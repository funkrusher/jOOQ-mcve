DROP DATABASE IF EXISTS mcve;

CREATE DATABASE mcve;

CREATE TABLE mcve.main (
  mainId INT NOT NULL AUTO_INCREMENT,
  cd INT,
  mainJson JSON,
  CONSTRAINT pk_main PRIMARY KEY (mainId)
);

CREATE TABLE mcve.sub (
  subId INT NOT NULL AUTO_INCREMENT,
  mainId INT NOT NULL,
  subJson JSON,
  CONSTRAINT pk_sub PRIMARY KEY (subId)
);

ALTER TABLE mcve.sub ADD CONSTRAINT FOREIGN KEY (mainId) REFERENCES mcve.main (mainId);